<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#FUNCTIONS">FUNCTIONS</a></li>
  <li><a href="#DOWNLOAD">DOWNLOAD</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h2>

<p>Sequence.lua - Reading, writing and manipulating MIDI data</p>

<h1 id="SYNOPSIS">SYNOPSIS</h2>

<pre><code> local SEQ = require &#39;Sequence&#39;</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h2>

<p>This module offers functions: cycle(), leibnitz(), morse_thue(), rabbit(), push_and_half_shift(), gen07() and gen09() It provides at the Lua level what http://www.pjb.com.au/midi/sequence.html provides at the command line - and more :-)</p>

<p>The Morse-Thue, Leibnitz and Rabbit sequences are fractal and scale-free.</p>

<p>The Morse-Thue sequence, according to Schroeder, is named in honour of the Norwegian mathematician Axel Thue (1863-1922), who introduced it in 1906 as an aperiodic, recursively computable sequence, and after Marston Morse of Princeton (1892-1977) who discovered its significance in the symbolic dynamics of certain nonlinear systems. The sequence for K=2 can be generated by taking the modulo 2 of the number of one-bits in the binary nonnegative integers; or, starting with a 0, by repeatedly applying the mapping 0 -&gt; 0 1 and 1 -&gt; 1 0; or by repeatedly appending the complement. The first five stages are 0, then 0 1, then 0 1 1 0, then 0 1 1 0 1 0 0 1, then 0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0.</p>

<p>With K=3 it can be generated by taking the modulo 3 of the number of one-bits in the binary nonnegative integers; or recursively by adding 1 and then 2, modulo 3. The first three stages are 0, then 0 1 2, then 0 1 2 1 2 0 2 0 1.</p>

<p>The Leibnitz sequence can be generated by counting the one-bits in the binary nonnegative integers; or by repeatedly appending the current sequence with one added to it. The first five stages are 0, then 0 1, then 0 1 1 2, then 0 1 1 2 1 2 2 3, then 0 1 1 2 1 2 2 3 1 2 2 3 2 3 3 4.</p>

<p>The Rabbit sequence (named by Schroeder) arises from Fibonacci&#39;s rabbit-problem in the Liber Abaci (1202). The sequence can be generated by starting with 1 and repeatedly applying the mapping 0 -&gt; 1 and 1 -&gt; 1 0; or by starting with the first two stages 1, then 1 0, and then appending to each stage the previous stage, so the next four stages are 1 0 1, then 1 0 1 1 0, then 1 0 1 1 0 1 0 1, then 1 0 1 1 0 1 0 1 1 0 1 1 0.</p>

<p>The Push_and_Half_Shift sequence (my own ad-hoccery :-() expands a smaller input-sequence (length N) into an output-sequence about N**2 / 2</p>

<h1 id="FUNCTIONS">FUNCTIONS</h2>

<dl>

<dt id="cycle-arg1-arg2-arg3-...-n-16"><i>cycle</i> ({arg1,arg2,arg3,..., [&#39;n&#39;]=16})</dt>
<dd>

<p>Outputs its array-arguments in a Cycle. The named argument <b>n</b> specifies the number of iterations that will be returned before a <i>nil</i> value; the default is 16.</p>

</dd>
<dt id="leibnitz-arg1-arg2-arg3-...-n-16"><i>leibnitz</i> ({arg1,arg2,arg3,..., [&#39;n&#39;]=16})</dt>
<dd>

<p>Outputs its array-arguments in a Leibnitz sequence. If N terms are to be output, there must be at least enough arguments (K) so that: 2^K &gt; N The named argument <b>n</b> specifies the number of iterations that will be returned before a <i>nil</i> value; the default is 16.</p>

</dd>
<dt id="morse_thue-arg1-arg2-arg3-...-n-16"><i>morse_thue</i> ({arg1,arg2,arg3,..., [&#39;n&#39;]=16})</dt>
<dd>

<p>Outputs its array-arguments in a Morse-Thue sequence. The named argument <b>n</b> specifies the number of iterations that will be returned before a <i>nil</i> value; the default is 16.</p>

</dd>
<dt id="rabbit-arg1-arg2-n-21"><i>rabbit</i> ({arg1,arg2, [&#39;n&#39;]=21})</dt>
<dd>

<p>Outputs its array-arguments in a Rabbit sequence. There must be two arguments (if there are more, the others are ignored). The named argument <b>n</b> specifies the number of iterations that will be returned before a <i>nil</i> value; the default is 21.</p>

</dd>
<dt id="push_and_half_shift-arg1-arg2-arg3-...-n-999"><i>push_and_half_shift</i> ({arg1,arg2,arg3,..., [&#39;n&#39;]=999})</dt>
<dd>

<p>Expands its arguments with a homebrew push-and-half-shift algorithm, by repeatedly outputting a sub-block of those arguments. The block starts with just the initial argument, and this is output. At each stage, for as long as there are arguments left the next argument is pushed onto to the end of the block, and every alternate stage, the first note is shifted off the beginning; then the block is appended to the output.</p>

<p>By this method, the output starts at the first argument and ends at the last argument. But it takes longer to make the journey: for example, 4 arguments expand to 16, 5 expand to 19, 6 to 30, 7 to 34, and 8 to 48.</p>

</dd>
<dt id="gen07-a-n1-b-n2-c-n3-....-size-24-n-72-int-false"><i>gen07</i> ({a, n1, b, n2, c, n3 ...., size=24, n=72, int=false})</dt>
<dd>

<p>Constructs sequences from segments of straight lines; modelled on the Csound GEN07 routine. The <i>a, b, c, etc</i> are ordinate values. The <i>n1, n2, n3, etc</i> are the lengths of each segment; they should be integers, and they may not be negative, but zero is meaningful for specifying discontinuous waveforms. Their total will be the <b>size</b>, the period of the final sequence.</p>

<p>The named argument <b>n</b> specifies the number of iterations that will be returned before a <i>nil</i> value; the default is three times the <b>size</b>. If <b>n</b> is zero, the iterator will not terminate.</p>

<p>The named argument <b>int</b> specifies f the values should be rounded to integers; the default is <b>false</b></p>

</dd>
<dt id="gen09-pna-stra-phsa-pnb-strb-phsb-etc..-size-24-n-72-min--1.0-max-1.0-int-false"><i>gen09</i> ({pna,stra,phsa, pnb,strb,phsb, etc.., size=24, n=72, min=-1.0, max=1.0, int=false})</dt>
<dd>

<p>Constructs sequences by summing sine-waves; modelled on the Csound GEN09 routine. <b>pna, pnb,</b> etc are the <i>Partial numbers</i>, relative to a fundamental that would occupy <b>n</b> locations per cycle; these must be positive, but do not have to be integers.</p>

<p><b>stra, strb,</b> etc are the Strengths of the partials pna, pnb etc. There are relative strengths, since the composite waveform may be rescaled later. Negative values would imply phase-inversion.</p>

<p><b>phsa, phsb,</b> etc are the initial Phases of the partials pna, pnb etc, expressed in degrees.</p>

<p>The named arguments <b>n</b> and <b>int</b> are as described in <b>gen07</b>, plus three new ones:</p>

<p>The named argument <b>size</b> specifies the period of the cycle; the default is 24.</p>

<p>The named argument <b>min</b> specifies the minimum value in the composite waveform; the default is -1.</p>

<p>The named argument <b>max</b> specifies the maximum value in the composite waveform; the default is +1.</p>

</dd>
</dl>

<h1 id="DOWNLOAD">DOWNLOAD</h2>

<p>This module may soon be available as a LuaRock...</p>

<p>The source is available in http://www.pjb.com.au/comp/lua/Sequence.lua for you to install in your LUA_PATH</p>

<p>The test script used during development is http://www.pjb.com.au/comp/lua/test_se.lua which requires the DataDumper.lua module.</p>

<h1 id="AUTHOR">AUTHOR</h2>

<p>Peter J Billam, http://www.pjb.com.au/comp/contact.html</p>

<h1 id="SEE-ALSO">SEE ALSO</h2>

<pre><code> &quot;Fractals, Chaos, Power Laws&quot;, Manfred Schroeder, Freeman, 1991
 http://www.pjb.com.au/
 http://www.pjb.com.au/comp/index.html#lua
 http://www.pjb.com.au/comp/lua/Sequence.html
 http://www.pjb.com.au/comp/lua/Sequence.lua
 http://www.pjb.com.au/comp/lua/test_se
 http://www.pjb.com.au/comp/lua/MIDI.html
 http://www.pjb.com.au/midi/sequence.html
 http://www.csounds.com/
 http://www.csounds.com/manual/html/ScoreGenRef.html</code></pre>


</body>

</html>


